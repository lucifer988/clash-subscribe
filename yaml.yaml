mixed-port: 7890
redir-port: 7892
tproxy-port: 7893
allow-lan: true
bind-address: 0.0.0.0
mode: rule
log-level: info
ipv6: false

external-controller: 0.0.0.0:9090
secret: ""

dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
  fallback:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

proxies:
  - name: ISIF-COP-2
    type: socks5
    server: 192.168.88.103
    port: 29923
    username: test
    password: 123456

  - name: RFC-JP
    type: socks5
    server: 192.168.88.108
    port: 28058
    username: test
    password: 123456

  - name: YXVM-Vol
    type: socks5
    server: 192.168.88.102
    port: 1080
    username: test
    password: 123456

  - name: RFC-HK-KX
    type: socks5
    server: 192.168.88.105
    port: 29301
    username: test
    password: 123456

  - name: RFC-HK-JP
    type: socks5
    server: 192.168.88.105
    port: 33687
    username: test
    password: 123456

  - name: RFC-HK-Alice
    type: socks5
    server: 192.168.88.105
    port: 31759
    username: test
    password: 123456

  - name: RFC-HK
    type: socks5
    server: 192.168.88.105
    port: 27560
    username: test
    password: 123456

  - name: ISIF-COP-2-Alice
    type: socks5
    server: 192.168.88.103
    port: 17744
    username: test
    password: 123456

  - name: ISIF-COP-2-KX
    type: socks5
    server: 192.168.88.103
    port: 20129
    username: test
    password: 123456

  - name: ISIF-COP-2-AK
    type: socks5
    server: 192.168.88.103
    port: 24523
    username: test
    password: 123456

  - name: ISIF-COP-1-AK
    type: socks5
    server: 192.168.88.100
    port: 25229
    username: test
    password: 123456

  - name: ISIF-COP-1-KX
    type: socks5
    server: 192.168.88.100
    port: 26330
    username: test
    password: 123456

  - name: ISIF-COP-1
    type: socks5
    server: 192.168.88.100
    port: 12610
    username: test
    password: 123456

  - name: ISIF-COP-1-Alice
    type: socks5
    server: 192.168.88.100
    port: 22063
    username: test
    password: 123456

  - name: RFC-JP-US
    type: socks5
    server: 192.168.88.108
    port: 35149
    username: test
    password: 123456

proxy-groups:
  # 你的要求：所有分组都包含全部节点（所以每组都复制一份全量列表）
  - name: PROXY
    type: select
    proxies:
      - DIRECT
      - ISIF-COP-2
      - RFC-JP
      - YXVM-Vol
      - RFC-HK-KX
      - RFC-HK-JP
      - RFC-HK-Alice
      - RFC-HK
      - ISIF-COP-2-Alice
      - ISIF-COP-2-KX
      - ISIF-COP-2-AK
      - ISIF-COP-1-AK
      - ISIF-COP-1-KX
      - ISIF-COP-1
      - ISIF-COP-1-Alice
      - RFC-JP-US

  - name: GAME-CN
    type: select
    proxies:
      - DIRECT
      - ISIF-COP-2
      - RFC-JP
      - YXVM-Vol
      - RFC-HK-KX
      - RFC-HK-JP
      - RFC-HK-Alice
      - RFC-HK
      - ISIF-COP-2-Alice
      - ISIF-COP-2-KX
      - ISIF-COP-2-AK
      - ISIF-COP-1-AK
      - ISIF-COP-1-KX
      - ISIF-COP-1
      - ISIF-COP-1-Alice
      - RFC-JP-US

  - name: AI
    type: select
    proxies:
      - PROXY
      - DIRECT
      - ISIF-COP-2
      - RFC-JP
      - YXVM-Vol
      - RFC-HK-KX
      - RFC-HK-JP
      - RFC-HK-Alice
      - RFC-HK
      - ISIF-COP-2-Alice
      - ISIF-COP-2-KX
      - ISIF-COP-2-AK
      - ISIF-COP-1-AK
      - ISIF-COP-1-KX
      - ISIF-COP-1
      - ISIF-COP-1-Alice
      - RFC-JP-US

  - name: NETFLIX
    type: select
    proxies:
      - PROXY
      - DIRECT
      - ISIF-COP-2
      - RFC-JP
      - YXVM-Vol
      - RFC-HK-KX
      - RFC-HK-JP
      - RFC-HK-Alice
      - RFC-HK
      - ISIF-COP-2-Alice
      - ISIF-COP-2-KX
      - ISIF-COP-2-AK
      - ISIF-COP-1-AK
      - ISIF-COP-1-KX
      - ISIF-COP-1
      - ISIF-COP-1-Alice
      - RFC-JP-US

  - name: EMBY
    type: select
    proxies:
      - PROXY
      - DIRECT
      - ISIF-COP-2
      - RFC-JP
      - YXVM-Vol
      - RFC-HK-KX
      - RFC-HK-JP
      - RFC-HK-Alice
      - RFC-HK
      - ISIF-COP-2-Alice
      - ISIF-COP-2-KX
      - ISIF-COP-2-AK
      - ISIF-COP-1-AK
      - ISIF-COP-1-KX
      - ISIF-COP-1
      - ISIF-COP-1-Alice
      - RFC-JP-US

rules:
  # ====== 强制直连：本地 / 私网 / LAN ======
  - DOMAIN-SUFFIX,local,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,169.254.0.0/16,DIRECT,no-resolve

  # ====== EMBY：你指定的域名 ======
  - DOMAIN,emby.88886611.xyz,EMBY

  # ====== NETFLIX（补全）======
  # 规则集（mihomo/Meta 通常内置，能用就更省事；不能用也不影响，因为下面还有显式域名）
  - GEOSITE,netflix,NETFLIX
  # 主域与常见资源域
  - DOMAIN-SUFFIX,netflix.com,NETFLIX
  - DOMAIN-SUFFIX,netflix.net,NETFLIX
  - DOMAIN-SUFFIX,nflxvideo.net,NETFLIX
  - DOMAIN-SUFFIX,nflximg.net,NETFLIX
  - DOMAIN-SUFFIX,nflximg.com,NETFLIX
  - DOMAIN-SUFFIX,nflxso.net,NETFLIX
  - DOMAIN-SUFFIX,nflxext.com,NETFLIX
  # 测速/检测
  - DOMAIN-SUFFIX,fast.com,NETFLIX
  # 兜底关键字（尽量放在 Netflix 专用段里）
  - DOMAIN-KEYWORD,netflix,NETFLIX
  - DOMAIN-KEYWORD,nflx,NETFLIX

  # ====== AI（补全：OpenAI / Claude / Gemini / 常见AI平台）======
  # OpenAI / ChatGPT
  - DOMAIN-SUFFIX,openai.com,AI
  - DOMAIN-SUFFIX,chatgpt.com,AI
  - DOMAIN-SUFFIX,oaistatic.com,AI
  - DOMAIN-SUFFIX,oaiusercontent.com,AI
  - DOMAIN-SUFFIX,openaiapi-site.azureedge.net,AI
  - DOMAIN-KEYWORD,openai,AI
  - DOMAIN-KEYWORD,chatgpt,AI

  # Anthropic / Claude
  - DOMAIN-SUFFIX,anthropic.com,AI
  - DOMAIN-SUFFIX,claude.ai,AI
  - DOMAIN-KEYWORD,anthropic,AI
  - DOMAIN-KEYWORD,claude,AI

  # Google Gemini / AI Studio / Generative AI
  - DOMAIN-SUFFIX,gemini.google.com,AI
  - DOMAIN-SUFFIX,aistudio.google.com,AI
  - DOMAIN-SUFFIX,makersuite.google.com,AI
  - DOMAIN-SUFFIX,generativeai.google,AI
  - DOMAIN-SUFFIX,ai.google.dev,AI
  - DOMAIN-SUFFIX,googleapis.com,AI
  - DOMAIN-SUFFIX,gstatic.com,AI
  - DOMAIN-SUFFIX,googleusercontent.com,AI
  - DOMAIN-KEYWORD,gemini,AI
  - DOMAIN-KEYWORD,generativeai,AI

  # Perplexity / Poe / HuggingFace / Replicate / Cohere / Mistral
  - DOMAIN-SUFFIX,perplexity.ai,AI
  - DOMAIN-SUFFIX,poe.com,AI
  - DOMAIN-SUFFIX,huggingface.co,AI
  - DOMAIN-SUFFIX,hf.co,AI
  - DOMAIN-SUFFIX,replicate.com,AI
  - DOMAIN-SUFFIX,cohere.com,AI
  - DOMAIN-SUFFIX,mistral.ai,AI

  # （可选兜底关键字，覆盖一些跳转/子域）
  - DOMAIN-KEYWORD,huggingface,AI
  - DOMAIN-KEYWORD,perplexity,AI

  # ====== 国内游戏（走 GAME-CN，默认你选 DIRECT）======
  - DOMAIN-SUFFIX,qq.com,GAME-CN
  - DOMAIN-SUFFIX,tencent.com,GAME-CN
  - DOMAIN-SUFFIX,wegame.com,GAME-CN
  - DOMAIN-SUFFIX,game.qq.com,GAME-CN
  - DOMAIN-SUFFIX,msdk.qq.com,GAME-CN
  - DOMAIN-SUFFIX,netease.com,GAME-CN
  - DOMAIN-SUFFIX,163.com,GAME-CN
  - DOMAIN-SUFFIX,mihoyo.com,GAME-CN
  - DOMAIN-SUFFIX,hoyoverse.com,GAME-CN
  - DOMAIN-SUFFIX,bilibili.com,GAME-CN
  - DOMAIN-SUFFIX,biligame.com,GAME-CN

  # ====== 国内必须直连（压住最后兜底 PROXY）======
  - GEOSITE,CN,DIRECT
  - GEOIP,CN,DIRECT

  # ====== 漏网之鱼：最后全部走 PROXY ======
  - MATCH,PROXY
